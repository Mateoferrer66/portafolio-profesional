<script>
    // Scroll Reveal Logic
    const observerOptions = {
        root: null,
        rootMargin: "0px",
        threshold: 0.1,
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                entry.target.classList.add("visible");
                observer.unobserve(entry.target); // Reveal only once
            }
        });
    }, observerOptions);

    // Observe all elements with .reveal class
    document.addEventListener("astro:page-load", () => {
        const revealElements = document.querySelectorAll(".reveal");
        revealElements.forEach((el) => observer.observe(el));
    });

    // Initial run for first load (in case view transitions aren't fully intercepting initial)
    const revealElements = document.querySelectorAll(".reveal");
    revealElements.forEach((el) => observer.observe(el));
</script>

<style is:global>
    /* Base reveal state */
    .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
    }

    /* Visible state */
    .reveal.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Staggered delays */
    .reveal-delay-100 {
        transition-delay: 100ms;
    }
    .reveal-delay-200 {
        transition-delay: 200ms;
    }
    .reveal-delay-300 {
        transition-delay: 300ms;
    }
</style>
