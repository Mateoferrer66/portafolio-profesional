---
import BaseLayout from "../layouts/BaseLayout.astro";

// Combined product data for easier filtering
import { products } from "../data/products";

const testimonials = [
    {
        quote: "Estoy encantado con mi compra. El producto lleg√≥ en perfectas condiciones y exactamente como se describe en la p√°gina.",
        author: "Cristian Guerrero",
        role: "Productor Multimedia",
    },
    {
        quote: "Esta tienda online ofrece una gran variedad de productos de alta calidad. He realizado m√∫ltiples compras y siempre he quedado satisfecho.",
        author: "Fernando Castillo",
        role: "Deportista ‚Äì Coach",
    },
    {
        quote: "No puedo creer lo bueno que es este sitio web. F√°cil de navegar, proceso de compra sin complicaciones y un servicio de entrega r√°pido.",
        author: "Maicol Garz√≥n",
        role: "Fot√≥grafo",
    },
];

const star = `M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z`;
---

<BaseLayout
    title="Tienda | Mateo Ferrer"
    description="Tienda online de servicios tecnol√≥gicos y educativos."
>
    <div class="main-container">
        <!-- Floating Cart Button -->
        <button id="cart-toggle" class="cart-float-btn" aria-label="Open Cart">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                ><circle cx="9" cy="21" r="1"></circle><circle
                    cx="20"
                    cy="21"
                    r="1"></circle><path
                    d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                ></path></svg
            >
            <span id="cart-count">0</span>
        </button>

        <!-- Cart Sidebar -->
        <div id="cart-sidebar" class="cart-sidebar">
            <div class="cart-header">
                <h2>Tu Carrito</h2>
                <button id="cart-close" class="close-btn">&times;</button>
            </div>
            <div id="cart-items" class="cart-items">
                <!-- Items injected by JS -->
                <p class="empty-msg">Tu carrito est√° vac√≠o.</p>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total Estimado:</span>
                    <span id="cart-total-price">$0</span>
                </div>
                <a
                    href="https://wa.me/573005059987"
                    target="_blank"
                    class="checkout-btn">Cotizar por WhatsApp</a
                >
            </div>
        </div>
        <div id="cart-overlay" class="cart-overlay"></div>
        <div id="toast-container" class="toast-container"></div>

        <!-- Product Details Modal -->
        <div id="product-modal" class="modal-overlay">
            <div class="modal-content">
                <button id="modal-close" class="modal-close">&times;</button>
                <div class="modal-body">
                    <div class="modal-image">
                        <img id="modal-img" src="" alt="Product" />
                    </div>
                    <div class="modal-details">
                        <span id="modal-category" class="modal-pill">APP</span>
                        <h2 id="modal-title">Product Title</h2>
                        <p id="modal-price" class="modal-price">$0</p>
                        <p id="modal-description" class="modal-desc">
                            Description goes here.
                        </p>
                        <div class="modal-actions">
                            <button id="modal-add-btn" class="primary-btn"
                                >Agregar al Carrito</button
                            >
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hero Section -->
        <section class="shop-hero">
            <div class="hero-content">
                <span class="badge">NUEVO</span>
                <h1>Marketplace Digital</h1>
                <p class="hero-text">
                    Descubre nuestra selecci√≥n premium de servicios
                    tecnol√≥gicos, asesor√≠as especializadas y productos de dise√±o
                    exclusivo. Todo lo que necesitas para potenciar tu proyecto
                    o negocio.
                </p>
                <!-- Search Bar -->
                <div class="search-container">
                    <input
                        type="text"
                        id="product-search"
                        placeholder="Buscar productos..."
                    />
                    <button class="search-btn">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            ><circle cx="11" cy="11" r="8"></circle><line
                                x1="21"
                                y1="21"
                                x2="16.65"
                                y2="16.65"></line></svg
                        >
                    </button>
                </div>
            </div>
            <div class="hero-image">
                <img src="/assets/shop-hero.png" alt="Futuristic Shop" />
            </div>
        </section>

        <!-- Categories Filter -->
        <section class="catalog-section" id="catalog">
            <div class="filters-container">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="apps">Apps Premium</button>
                <button class="filter-btn" data-filter="gaming">Gaming</button>
                <button class="filter-btn" data-filter="education">Educaci√≥n</button>
                <button class="filter-btn" data-filter="tech">Tecnolog√≠a</button>
                <button class="filter-btn" data-filter="software">Software</button>
                <button class="filter-btn" data-filter="design">Dise√±o</button>
                <button class="filter-btn" data-filter="marketing">Marketing</button>
                <button class="filter-btn" data-filter="clothing">Ropa</button>
                <button class="filter-btn" data-filter="3d">Impresi√≥n 3D</button>
            </div>

            <div class="products-grid" id="products-grid">
                {
                    products.map((product) => (
                        <div
                            class="product-card"
                            data-category={product.category}
                            data-name={product.name.toLowerCase()}
                        >
                            <div class="image-wrapper">
                                <img
                                    src={product.image}
                                    alt={product.name}
                                    loading="lazy"
                                />
                                <div class="overlay">
                                    <button
                                        class="wishlist-btn"
                                        data-id={product.id}
                                        aria-label="Agregar a favoritos"
                                    >
                                        <svg
                                            xmlns="http://www.w3.org/2000/svg"
                                            width="20"
                                            height="20"
                                            viewBox="0 0 24 24"
                                            fill="none"
                                            stroke="currentColor"
                                            stroke-width="2"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            class="heart-icon"
                                            ><path
                                                d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                                            ></path></svg
                                        >
                                    </button>
                                    <button
                                        class="add-cart-btn"
                                        data-id={product.id}
                                        data-name={product.name}
                                        data-price={product.price}
                                        data-image={product.image}
                                    >
                                        Agregar +
                                    </button>
                                </div>
                            </div>
                            <div
                                class="content product-trigger"
                                data-id={product.id}
                            >
                                <span class="category-tag">
                                    {product.category.toUpperCase()}
                                </span>
                                <h4>{product.name}</h4>
                                <p class="price">{product.price}</p>
                            </div>
                        </div>
                    ))
                }
            </div>
            <p
                id="no-results"
                style="display:none; text-align:center; margin-top: 2rem;"
            >
                No se encontraron productos.
            </p>
        </section>

        <!-- Features Banner -->
        <section class="features-banner">
            <div class="banner-item">
                <div class="icon">üöÄ</div>
                <h3>Entrega Inmediata</h3>
                <p>Para productos digitales y servicios urgentes.</p>
            </div>
            <div class="banner-item">
                <div class="icon">üíé</div>
                <h3>Calidad Garantizada</h3>
                <p>Soporte posventa y garant√≠a en todos nuestros servicios.</p>
            </div>
            <div class="banner-item">
                <div class="icon">üîí</div>
                <h3>Pagos Seguros</h3>
                <p>Transacciones protegidas y m√∫ltiples medios de pago.</p>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials-section">
            <h2 class="section-title">Lo que dicen nuestros clientes</h2>
            <div class="testimonials-grid">
                {
                    testimonials.map((testimonial) => (
                        <div class="testimonial-card">
                            <div class="stars">
                                {Array(5)
                                    .fill(0)
                                    .map(() => (
                                        <svg
                                            class="star-icon"
                                            viewBox="0 0 24 24"
                                        >
                                            <path d={star} />
                                        </svg>
                                    ))}
                            </div>
                            <p class="quote">"{testimonial.quote}"</p>
                            <div class="author-info">
                                <p class="author">{testimonial.author}</p>
                                <p class="role">{testimonial.role}</p>
                            </div>
                        </div>
                    ))
                }
            </div>
        </section>

        <!-- Contact CTA -->
        <section class="cta-section">
            <div class="cta-content">
                <h2>¬øTienes un proyecto especial?</h2>
                <p>Cont√°ctanos para una cotizaci√≥n personalizada.</p>
                <a href="mailto:contact@mateoferrer.com" class="primary-btn"
                    >Contactar Ahora</a
                >
            </div>
        </section>
    </div>
</BaseLayout>

<script>
    // --- APP LOGIC ---
    import { products } from "../data/products";

    interface Product {
        id: string | number;
        name: string;
        price: string;
        image: string;
        description?: string;
        category: string;
        tags: string[];
    }

    interface CartItem extends Product {
        quantity: number;
    }

    let cart: CartItem[] = JSON.parse(
        localStorage.getItem("mf_shop_cart") || "[]",
    );

    let wishlist: (string | number)[] = JSON.parse(
        localStorage.getItem("mf_shop_wishlist") || "[]",
    );

    // Selectors
    const cartToggle = document.getElementById("cart-toggle");
    const cartSidebar = document.getElementById("cart-sidebar");
    const cartOverlay = document.getElementById("cart-overlay");
    const cartClose = document.getElementById("cart-close");
    const cartItemsContainer = document.getElementById("cart-items");
    const cartCount = document.getElementById("cart-count");
    const addButtons = document.querySelectorAll(".add-cart-btn");
    const searchInput = document.getElementById(
        "product-search",
    ) as HTMLInputElement | null;
    const filterBtns = document.querySelectorAll(".filter-btn");
    const productCards = document.querySelectorAll(".product-card");
    const toastContainer = document.getElementById("toast-container");

    // Modal Selectors
    const modal = document.getElementById("product-modal");
    const modalClose = document.getElementById("modal-close");
    const modalImg = document.getElementById("modal-img") as HTMLImageElement;
    const modalTitle = document.getElementById("modal-title");
    const modalPrice = document.getElementById("modal-price");
    const modalDesc = document.getElementById("modal-description");
    const modalCategory = document.getElementById("modal-category");
    const modalAddBtn = document.getElementById("modal-add-btn");
    const productTriggers = document.querySelectorAll(".product-trigger");

    // Wishlist Selectors
    const wishlistBtns = document.querySelectorAll(".wishlist-btn");

    // --- TOAST FUNCTIONS ---
    function showToast(message: string, type: "success" | "error" = "success") {
        if (!toastContainer) return;

        const toast = document.createElement("div");
        toast.className = `toast ${type}`;
        toast.innerHTML = `
            <div class="toast-content">
                <span class="toast-icon">${type === "success" ? "‚úÖ" : "‚ùå"}</span>
                <span class="toast-message">${message}</span>
            </div>
        `;

        toastContainer.appendChild(toast);

        // Trigger animation
        requestAnimationFrame(() => {
            toast.classList.add("show");
        });

        setTimeout(() => {
            toast.classList.remove("show");
            setTimeout(() => {
                toast.remove();
            }, 300);
        }, 3000);
    }

    // --- CART FUNCTIONS ---
    function updateCartUI() {
        // Update badge
        if (cartCount) {
            const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);
            cartCount.textContent = totalItems.toString();
        }

        if (!cartItemsContainer) return;

        // Render items
        if (cart.length === 0) {
            cartItemsContainer.innerHTML =
                '<p class="empty-msg">Tu carrito est√° vac√≠o.</p>';
        } else {
            cartItemsContainer.innerHTML = cart
                .map(
                    (item: CartItem, index: number) => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" />
                    <div class="cart-item-info">
                        <h5>${item.name}</h5>
                        <p>${item.price}</p>
                        <div class="quantity-controls">
                            <button class="qty-btn minus" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="qty-btn plus" data-id="${item.id}">+</button>
                        </div>
                    </div>
                     <button class="remove-btn" data-id="${item.id}">&times;</button>
                </div>
            `,
                )
                .join("");

            // Add event listeners
            document.querySelectorAll(".qty-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    const target = e.target as HTMLElement;
                    const id = target.getAttribute("data-id");
                    if (id) {
                        if (target.classList.contains("plus")) {
                            updateQuantity(id, 1);
                        } else {
                            updateQuantity(id, -1);
                        }
                    }
                });
            });

            document.querySelectorAll(".remove-btn").forEach((btn) => {
                btn.addEventListener("click", (e) => {
                    const target = e.target as HTMLElement;
                    const id = target.getAttribute("data-id");
                    if (id) removeFromCart(id);
                });
            });
        }

        // Calculate Total
        let total = 0;
        cart.forEach((item) => {
            // Remove '$', '.', and non-numeric chars except for digits.
            // Assume format like "$50.000 / A√±o" -> 50000
            const priceString = item.price.replace(/[^0-9]/g, "");
            const priceVal = parseInt(priceString);
            if (!isNaN(priceVal)) {
                total += priceVal * item.quantity;
            }
        });

        const totalFormatted = "$" + total.toLocaleString("es-CO");
        const cartTotalEl = document.getElementById("cart-total-price");
        if (cartTotalEl) {
            cartTotalEl.textContent = totalFormatted;
        }

        // Save
        localStorage.setItem("mf_shop_cart", JSON.stringify(cart));

        // Update WhatsApp Link
        const checkoutBtn = document.querySelector(
            ".checkout-btn",
        ) as HTMLAnchorElement;
        if (checkoutBtn) {
            if (cart.length > 0) {
                const itemsList = cart
                    .map((item) => `- ${item.quantity}x ${item.name} (${item.price})`)
                    .join("%0A");

                const message = `Hola Mateo, estoy interesado en cotizar los siguientes productos:%0A%0A${itemsList}%0A%0ATotal estimado: ${totalFormatted}`;
                checkoutBtn.href = `https://wa.me/573005059987?text=${message}`;
                checkoutBtn.style.pointerEvents = "auto";
                checkoutBtn.style.opacity = "1";
            } else {
                checkoutBtn.href = "#";
                checkoutBtn.style.pointerEvents = "none";
                checkoutBtn.style.opacity = "0.5";
            }
        }
    }

    function addToCart(product: Product) {
        const existingItem = cart.find((item) => item.id === product.id);

        if (existingItem) {
            existingItem.quantity += 1;
            showToast(`Se aument√≥ la cantidad de <b>${product.name}</b>`);
        } else {
            cart.push({ ...product, quantity: 1 });
            showToast(`<b>${product.name}</b> agregado al carrito`);
        }

        updateCartUI();
        
        // Open cart feedback
        if (cartSidebar) cartSidebar.classList.add("open");
        if (cartOverlay) cartOverlay.classList.add("open");
    }

    function updateQuantity(id: string, change: number) {
        const itemIndex = cart.findIndex((item) => item.id === id);
        if (itemIndex > -1) {
            const newQuantity = cart[itemIndex].quantity + change;
            if (newQuantity > 0) {
                cart[itemIndex].quantity = newQuantity;
            } else {
                // If quantity goes to 0, ask to remove or just remove
                cart.splice(itemIndex, 1);
            }
            updateCartUI();
        }
    }

    function removeFromCart(id: string) {
        cart = cart.filter(item => item.id !== id);
        updateCartUI();
    }

    // Event Listeners
    if (cartToggle) {
        cartToggle.addEventListener("click", () => {
            if (cartSidebar) cartSidebar.classList.add("open");
            if (cartOverlay) cartOverlay.classList.add("open");
        });
    }

    function closeCart() {
        if (cartSidebar) cartSidebar.classList.remove("open");
        if (cartOverlay) cartOverlay.classList.remove("open");
    }

    if (cartClose) cartClose.addEventListener("click", closeCart);
    if (cartOverlay) cartOverlay.addEventListener("click", closeCart);

    addButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
            const product: Product = {
                id: btn.getAttribute("data-id") || "",
                name: btn.getAttribute("data-name") || "",
                price: btn.getAttribute("data-price") || "",
                image: btn.getAttribute("data-image") || "",
                category: "",
                tags: []
            };
            addToCart(product);
        });
    });

    // --- SEARCH & FILTER LOGIC ---
    function filterProducts() {
        if (!searchInput) return;
        const query = searchInput.value.toLowerCase();

        const activeBtn = document.querySelector(".filter-btn.active");
        const activeCategory = activeBtn
            ? activeBtn.getAttribute("data-filter")
            : "all";

        let visibleCount = 0;

        productCards.forEach((card) => {
            const name = card.getAttribute("data-name") || "";
            const category = card.getAttribute("data-category") || "";

            const matchQuery = name.includes(query);
            const matchCategory =
                activeCategory === "all" || category === activeCategory;

            if (matchQuery && matchCategory) {
                (card as HTMLElement).style.display = "block";
                visibleCount++;
            } else {
                (card as HTMLElement).style.display = "none";
            }
        });

        const noResults = document.getElementById("no-results");
        if (noResults) {
            if (visibleCount === 0) {
                noResults.style.display = "block";
            } else {
                noResults.style.display = "none";
            }
        }
    }

    if (searchInput) searchInput.addEventListener("input", filterProducts);

    filterBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
            filterBtns.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            filterProducts();
        });
    });

    // --- MODAL FUNCTIONS ---
    function openModal(productId: string | number) {
        const product = products.find((p) => p.id == productId);
        if (!product || !modal) return;

        if (modalImg) modalImg.src = product.image;
        if (modalTitle) modalTitle.textContent = product.name;
        if (modalPrice) modalPrice.textContent = product.price;
        if (modalCategory)
            modalCategory.textContent = product.category.toUpperCase();
        if (modalDesc)
            modalDesc.textContent =
                product.description || "Sin descripci√≥n disponible.";

        // Update Add Button in Modal
        if (modalAddBtn) {
            // Clone to remove old listeners
            const newBtn = modalAddBtn.cloneNode(true);
            modalAddBtn.parentNode?.replaceChild(newBtn, modalAddBtn);
            newBtn.addEventListener("click", () => {
                addToCart(product);
                if (modal) modal.classList.remove("open");
            });
        }

        modal.classList.add("open");
    }

    if (modalClose) {
        modalClose.addEventListener("click", () => {
            if (modal) modal.classList.remove("open");
        });
    }

    // Close on click outside
    if (modal) {
        modal.addEventListener("click", (e) => {
            if (e.target === modal) modal.classList.remove("open");
        });
    }

    productTriggers.forEach((trigger) => {
        trigger.addEventListener("click", () => {
            const id = trigger.getAttribute("data-id");
            if (id) openModal(id);
        });
    });

    // --- WISHLIST FUNCTIONS ---
    function toggleWishlist(id: string | number) {
        const index = wishlist.indexOf(id);
        if (index === -1) {
            wishlist.push(id);
            showToast("Agregado a favoritos");
        } else {
            wishlist.splice(index, 1);
            showToast("Eliminado de favoritos");
        }
        localStorage.setItem("mf_shop_wishlist", JSON.stringify(wishlist));
        updateWishlistUI();
    }

    function updateWishlistUI() {
        wishlistBtns.forEach((btn) => {
            const id = btn.getAttribute("data-id");
            // Check loosely for number/string match
            if (id && wishlist.some((wId) => wId == id)) {
                btn.classList.add("active");
                const icon = btn.querySelector(".heart-icon");
                if (icon) icon.setAttribute("fill", "currentColor");
            } else {
                btn.classList.remove("active");
                const icon = btn.querySelector(".heart-icon");
                if (icon) icon.setAttribute("fill", "none");
            }
        });
    }

    wishlistBtns.forEach((btn) => {
        btn.addEventListener("click", (e) => {
            e.stopPropagation(); // Prevent card click
            const id = btn.getAttribute("data-id");
            if (id) toggleWishlist(parseInt(id) || id);
        });
    });

    // Init
    updateCartUI();
    updateWishlistUI();
</script>

<style>
    /* Variables & Reset */
    :root {
        --primary: #7611a6;
        --secondary: #1c0056;
        --surface: #ffffff;
        --text-main: var(--gray-100);
        --text-muted: var(--gray-300);
        --radius: 16px;
        --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }

    /* Floating Cart */
    .cart-float-btn {
        position: fixed;
        bottom: 6rem;
        right: 2rem;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 10px 25px rgba(118, 17, 166, 0.4);
        z-index: 1000;
        cursor: pointer;
        transition: transform 0.3s ease;
    }

    .cart-float-btn:hover {
        transform: scale(1.1);
    }

    #cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ff4757;
        color: white;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
    }

    /* Cart Sidebar */
    .cart-sidebar {
        position: fixed;
        top: 0;
        right: -400px;
        width: 100%;
        max-width: 400px;
        height: 100vh;
        background: var(--gray-999);
        box-shadow: -5px 0 30px rgba(0, 0, 0, 0.2);
        z-index: 1001;
        transition: right 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        display: flex;
        flex-direction: column;
        padding: 2rem;
    }

    .cart-sidebar.open {
        right: 0;
    }

    .cart-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        display: none;
        backdrop-filter: blur(4px);
    }

    .cart-overlay.open {
        display: block;
    }

    .cart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--gray-800);
        padding-bottom: 1rem;
    }

    .close-btn {
        background: none;
        border: none;
        font-size: 2rem;
        color: var(--gray-200);
        cursor: pointer;
    }

    .cart-items {
        flex: 1;
        overflow-y: auto;
    }

    .cart-item {
        display: flex;
        gap: 1rem;
        margin-bottom: 1rem;
        background: var(--gray-800);
        padding: 1rem;
        border-radius: 12px;
        align-items: center;
        justify-content: space-between;
    }

    .cart-item img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 8px;
    }

    .cart-item-info {
        flex: 1;
    }

    .cart-item-info h5 {
        font-size: 0.9rem;
        color: var(--text-main);
        margin: 0;
    }

    .cart-item-info p {
        font-size: 0.8rem;
        color: var(--primary);
        font-weight: bold;
        margin: 0.2rem 0;
    }

    /* Quantity Controls */
    .quantity-controls {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
        background: var(--gray-700);
        width: fit-content;
        border-radius: 4rem;
        padding: 2px;
    }

    .qty-btn {
        background: var(--gray-600);
        border: none;
        color: white;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        font-size: 1rem;
        line-height: 1;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
    }

    .qty-btn:hover {
        background: var(--primary);
    }

    .quantity-controls span {
        font-size: 0.8rem;
        font-weight: bold;
        min-width: 15px;
        text-align: center;
    }

    /* Toast Notifications */
    .toast-container {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10000;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .toast {
        background: var(--gray-800);
        border: 1px solid var(--gray-700);
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 50px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        gap: 1rem;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .toast.show {
        opacity: 1;
        transform: translateY(0);
    }

    .toast.success {
        border-color: rgba(118, 17, 166, 0.5);
    }

    .toast-content {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .toast-message b {
        color: var(--primary);
    }

    /* Wishlist Button */
    .wishlist-btn {
        background: rgba(0, 0, 0, 0.5);
        border: none;
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        position: absolute;
        top: 1rem;
        right: 1rem;
        opacity: 0;
        transform: translateY(-10px);
        z-index: 2;
    }

    .product-card:hover .wishlist-btn {
        opacity: 1;
        transform: translateY(0);
    }

    .wishlist-btn:hover {
        background: white;
        color: #ff4757;
    }

    .wishlist-btn.active {
        background: white;
        color: #ff4757;
        opacity: 1;
        transform: translateY(0);
    }

    /* Modal */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        padding: 1rem;
    }

    .modal-overlay.open {
        display: flex;
    }

    .modal-content {
        background: var(--surface);
        width: 100%;
        max-width: 900px;
        border-radius: 20px;
        padding: 2rem;
        position: relative;
        overflow: hidden;
        animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .modal-close {
        position: absolute;
        top: 1rem;
        right: 1.5rem;
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: var(--gray-400);
        z-index: 10;
    }

    .modal-body {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }

    .modal-image img {
        width: 100%;
        border-radius: 12px;
        box-shadow: var(--shadow);
    }

    .modal-details {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .modal-pill {
        background: var(--primary);
        color: white;
        padding: 0.2rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        width: fit-content;
        margin-bottom: 1rem;
    }

    .modal-details h2 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        color: var(--secondary);
    }

    .modal-price {
        font-size: 1.5rem;
        color: var(--primary);
        font-weight: bold;
        margin-bottom: 1.5rem;
    }

    .modal-desc {
        color: var(--text-muted);
        line-height: 1.6;
        margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
        .modal-body {
            grid-template-columns: 1fr;
        }
        .modal-image {
            max-height: 300px;
            overflow: hidden;
            border-radius: 12px;
        }
    }
        border-radius: 12px;
        position: relative;
    }

    .cart-item img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 8px;
    }

    .cart-item-info h5 {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
    }

    .remove-btn {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        background: none;
        border: none;
        color: var(--gray-400);
        cursor: pointer;
        font-size: 1.25rem;
    }

    .cart-footer {
        border-top: 1px solid var(--gray-800);
        padding-top: 1.5rem;
    }

    .cart-total {
        display: flex;
        justify-content: space-between;
        font-size: 1.25rem;
        font-weight: bold;
        margin-bottom: 1.5rem;
    }

    .checkout-btn {
        background: #25d366; /* WhatsApp green */
        color: white;
        text-decoration: none;
        display: block;
        text-align: center;
        padding: 1rem;
        border-radius: 12px;
        font-weight: bold;
    }

    .main-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
    }

    /* Hero Section */
    .shop-hero {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4rem;
        align-items: center;
        margin-bottom: 6rem;
        background: linear-gradient(
            135deg,
            rgba(118, 17, 166, 0.1) 0%,
            rgba(28, 0, 86, 0.05) 100%
        );
        padding: 4rem;
        border-radius: 24px;
        position: relative;
        overflow: hidden;
    }

    .hero-content h1 {
        font-size: 3.5rem;
        line-height: 1.1;
        margin-bottom: 1.5rem;
        background: linear-gradient(to right, var(--primary), #a855f7);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .badge {
        background: var(--primary);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 50px;
        font-size: 0.875rem;
        font-weight: bold;
        display: inline-block;
        margin-bottom: 1.5rem;
    }

    .hero-text {
        font-size: 1.25rem;
        color: var(--gray-200);
        margin-bottom: 2.5rem;
        line-height: 1.6;
    }

    .hero-image img {
        width: 100%;
        height: auto;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        transform: rotate(2deg);
        transition: transform 0.3s ease;
    }

    /* Search */
    .search-container {
        position: relative;
        max-width: 400px;
    }

    .search-container input {
        width: 100%;
        padding: 1rem 1.5rem;
        border-radius: 50px;
        border: 2px solid var(--gray-800);
        background: var(--gray-999);
        color: var(--gray-200);
        font-size: 1rem;
    }

    .search-btn {
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        background: var(--primary);
        color: white;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    /* Filters */
    .filters-container {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 4rem;
    }

    .filter-btn {
        background: transparent;
        border: 2px solid var(--gray-800);
        color: var(--gray-300);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .filter-btn:hover,
    .filter-btn.active {
        background: var(--primary);
        border-color: var(--primary);
        color: white;
        transform: translateY(-2px);
    }

    /* Product Grid */
    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2.5rem;
        margin-bottom: 6rem;
    }

    .product-card {
        background: var(--gray-999);
        border-radius: var(--radius);
        overflow: hidden;
        border: 1px solid var(--gray-800);
        transition:
            transform 0.3s ease,
            box-shadow 0.3s ease;
        animation: fadeIn 0.5s ease;
    }

    .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        border-color: var(--primary);
    }

    .image-wrapper {
        position: relative;
        height: 250px;
        overflow: hidden;
    }

    .image-wrapper img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .product-card:hover .image-wrapper img {
        transform: scale(1.1);
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .product-card:hover .overlay {
        opacity: 1;
    }

    .add-cart-btn {
        background: white;
        color: black;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        font-weight: bold;
        cursor: pointer;
        transform: translateY(20px);
        transition: transform 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .product-card:hover .add-cart-btn {
        transform: translateY(0);
    }

    .add-cart-btn.added {
        background-color: #25d366;
        color: white;
    }

    .content {
        padding: 1.5rem;
    }

    .category-tag {
        font-size: 0.75rem;
        color: var(--primary);
        font-weight: 700;
        letter-spacing: 1px;
    }

    .content h4 {
        margin: 0.5rem 0;
        font-size: 1.25rem;
    }

    .price {
        font-size: 1.1rem;
        color: var(--gray-200);
        font-weight: 500;
    }

    /* Features Banner */
    .features-banner {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        background: var(--gray-999);
        border: 1px solid var(--gray-800);
        padding: 3rem;
        border-radius: 20px;
        margin-bottom: 6rem;
    }

    .banner-item {
        text-align: center;
    }

    .banner-item .icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }

    .banner-item h3 {
        color: var(--gray-100);
        margin-bottom: 0.5rem;
    }

    /* Testimonials */
    .testimonials-section {
        margin-bottom: 6rem;
        text-align: center;
    }

    .section-title {
        font-size: 2.5rem;
        margin-bottom: 3rem;
    }

    .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
    }

    .testimonial-card {
        background: var(--gray-999);
        padding: 2rem;
        border-radius: 16px;
        border: 1px solid var(--gray-800);
    }

    .stars {
        color: #ffc107;
        margin-bottom: 1rem;
        display: flex;
        justify-content: center;
        gap: 4px;
    }

    .star-icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
    }

    .quote {
        font-style: italic;
        color: var(--gray-300);
        margin-bottom: 1.5rem;
    }

    .author {
        font-weight: bold;
        color: var(--primary);
    }

    /* CTA Section */
    .cta-section {
        background: var(--gradient-accent-orange);
        padding: 4rem 2rem;
        border-radius: 24px;
        text-align: center;
        color: var(--gray-999);
    }

    .cta-section h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .cta-section p {
        font-size: 1.25rem;
        margin-bottom: 2rem;
        opacity: 0.9;
    }

    .primary-btn {
        background: white;
        color: var(--primary);
        padding: 1rem 2.5rem;
        border-radius: 50px;
        font-weight: bold;
        text-decoration: none;
        display: inline-block;
        transition: transform 0.3s ease;
    }

    .primary-btn:hover {
        transform: scale(1.05);
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Responsive */
    @media (max-width: 768px) {
        .shop-hero {
            grid-template-columns: 1fr;
            padding: 2rem;
            text-align: center;
        }

        .hero-stats {
            justify-content: center;
        }

        .hero-image {
            display: none;
        }

        .hero-content h1 {
            font-size: 2.5rem;
        }

        .cart-sidebar {
            width: 85%;
            right: -85%;
        }
    }
</style>
